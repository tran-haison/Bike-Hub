<!-- PAGE: Login -->
<!-- FILE: login.ejs -->

<%- include('header'); -%>

    <!-- Navbar -->
    <%- include('navbar'); -%>

        <main class="content">
            <section class="container px-5 mt-5 text-dark">
                <div class="row align-items-center g-5 justify-content-center">
                    <div class="col-md-6">
                        <h1 class="display-5 fw-bold text-dark">Login</h1>
                        <p class="text-muted">Enter your username and password to login</p>
                        <form class="login-form" novalidate action="/login" method="POST">
                            <div class="form-floating mb-3">
                                <input type="text" class="form-control" id="username-login" name="username"
                                    placeholder="Username" required>
                                <label for="username-login">Username</label>
                                <div class="invalid-feedback">
                                    Enter your username
                                </div>
                            </div>
                            <div class="form-floating mb-3">
                                <input type="password" class="form-control" id="password-login" name="password"
                                    placeholder="Password" required>
                                <label for="password-login">Password</label>
                                <div class="invalid-feedback">
                                    Enter your password
                                </div>
                            </div>
                            <button class="w-100 btn btn-lg btn-dark" type="submit" onclick="validateForm()">
                                Login
                            </button>
                        </form>
                        <div class="mt-3 text-center">
                            <p class="text-muted">
                                Don't have an account?
                                <a href="/register">Register</a>
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <script>
            function validateForm() {
                const form = document.querySelector('.login-form');

                // Add event listener when submitting form
                // Prevent submitting and showing error if invalidated
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }

                    form.classList.add('was-validated');
                }, false);
            }
        </script>

        <%- include('footer'); -%>